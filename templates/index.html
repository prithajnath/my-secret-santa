<!doctype html>
{% import "bootstrap/wtf.html" as wtf %}
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Rubik+Mono+One&display=swap" rel="stylesheet">
  <title>My Secret Santa</title>
</head>
<style>
  body {
    font-family: 'Roboto Mono', monospace;
    background-color: #fefcfb;
    background-image: radial-gradient(circle 30px, #bfb2b2 0%, #a2999900 10%);
    background-position: 0 0, 50px 50px;
    background-size: 100px 100px;
    background-attachment: fixed;
  }

  a {
    text-decoration: none;
    color: black;
  }

  a:hover {
    text-decoration: none;
    color: red;
  }

  .santa-button {
    background-color: #fefcfb;
    border-color: black;
    border-style: solid;
    padding: 5px 15px 5px 15px;
    font-size: larger;
    font-weight: bolder;
    text-align: center;
    padding-top: 10px;
    padding-bottom: 10px;
    transition: all 0.4s;
  }

  .santa-button:hover {
    cursor: pointer;
    background-color: #f12933;
    color: #fefcfb;
    display: inline block;
  }

  .form-control {
    -webkit-transition: all 0.30s ease-in-out;
    -moz-transition: all 0.30s ease-in-out;
    -ms-transition: all 0.30s ease-in-out;
    -o-transition: all 0.30s ease-in-out;
    outline: none;
    padding: 3px 0px 3px 3px;
    margin: 5px 1px 3px 0px;
    border: 2px solid black;
    border-radius: 0px;
    resize: none;
    background-color: #fefcfb;
    width: 100%;
  }

  h2 {
    font-family: 'Rubik Mono One', sans-serif;
  }
</style>

<body>
  <div class="container" style="z-index: 3;">
    <div class="row">
      <div class="col">
        <br /><br />
        <img class="img-fluid" src="https://media.giphy.com/media/ju0klUboMNJGdMSwW9/giphy.gif" />
      </div>
    </div>
    <div class="row">
      <div class="col">
        <br /></br>
        {% if alert %}
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
          {{ alert }}
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <br />
        {% endif %}
        <img src="https://res.cloudinary.com/dzmp7xptn/image/upload/v1605468679/huge_1_ftwk3b.png" class="img-fluid" />
        <br /></br>
        <a href="/login"><strong> Sign in (already have an account) </strong> </a>
        <br /></br>
        <form method="POST" action="/register">
          <div class="form-group">
            {{ form.hidden_tag() }}
            {{ wtf.form_field(form.username) }}
            {{ wtf.form_field(form.email) }}
            {{ wtf.form_field(form.first_name) }}
            {{ wtf.form_field(form.last_name) }}
            {{ wtf.form_field(form.password) }}
          </div>
        </form>
        <br />
        <button type="submit" class="santa-button">Sign up</button>
        <a id="oauth_google" href="{{ oauth_url }}">
          <div>
            <img src="https://res.cloudinary.com/dzmp7xptn/image/upload/v1680902967/google_logo_jsnpwn.png"
              style="height:40px; padding-left: 42%;" />
          </div>
        </a>
      </div>
    </div>
  </div>
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
  <script>

    // Leaving this here just in case I need it in the future
    // https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser
    function detectMob() {
      const toMatch = [
        /Android/i,
        /webOS/i,
        /iPhone/i,
        /iPad/i,
        /iPod/i,
        /BlackBerry/i,
        /Windows Phone/i
      ];

      return toMatch.some((toMatchItem) => {
        return navigator.userAgent.match(toMatchItem);
      });
    }


    let button = document.querySelector(".santa-button");
    button.addEventListener("click", function (e) {
      let form = document.querySelector("form");
      form.reportValidity();
      if (form.checkValidity() === true) {
        form.submit();
      }
    });

    var url = new URL(window.location.href);
    var next = url.searchParams.get("next");

    if (next) {
      var form = document.querySelector("form")
      var action = `${form.action}?next=${next}`;
      form.action = action;
      // update oauth url
      // add the invite code as state

      var oauth_google = document.querySelector("#oauth_google");
      var oauth_url = new URL(oauth_google.href);
      oauth_url.searchParams.set("state", encodeURIComponent(next));
      oauth_google.href = oauth_url.toString();
    }



  </script>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NHKJEQJJH2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-NHKJEQJJH2');
  </script>



</body>

</html>